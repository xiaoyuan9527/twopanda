<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- 重置样式表 -->
    <link rel="stylesheet" href="css/reset.css">
    <!-- 公共样式表 -->
    <link rel="stylesheet" href="css/common.css">
    <!-- 特殊文字样式表 -->
    <link rel="stylesheet" href="">
    <!-- 当前页面样式表 -->
    <link rel="stylesheet" href="css/shop.css">
    <!-- 引入js样式文件 -->
</head>

<body>
    <!-- 头部 -->
    <!-- 这是注释 -->
    <div id="header" class="content flexB">
        <div class="logo">
            <a href="index.html"><img src="./images/logo.png" alt=""></a>
            <div class="right">
                <h3>熊猫优选</h3>
                <span>XIONG MAO YOU XUAN</span>
            </div>
        </div>
        <div class="search">
            <input type="text" placeholder="搜索商品，发现更多优惠">
            <div class="btn">搜索</div>
        </div>
        <div class="tool">
            <ul>
                <li>
                    <a href="login.html">
                        <img src="./images/1.png" alt="">
                        <span>登陆</span>
                    </a>
                </li>
                <!-- 购物车事件 -->
                <li>
                    <a href="shop.html">
                        <img src="./images/2.png" alt="">
                        <span>购物车</span>
                    </a>
                </li>
                <li>
                    <img src="./images/3.png" alt="">
                    <span>品质保证</span>
                </li>
            </ul>
        </div>
    </div>
    <!-- 导航栏 -->
    <div id="nav">
        <ul class="content">
            <!-- js默认跳转设置样式 -->
            <a href="index.html"><li>首页</li></a>
        </ul>
    </div>
    <!-- 主要内容 -->
    <div id="main">
        <div class="change content flex">
            <h3>选择你需要的商品进行付款</h3>
        </div>
        <table class="content cartTable">
            <thead>
                <tr>
                    <td style="width: 80px;">
                        <label>
                            <input type="checkbox" class="checkAll">
                            全选
                        </label>
                    </td>
                    <td style="width: 580px;">商品</td>
                    <td style="width: 160px;">单价(元)</td>
                    <td style="width: 60px;">数量</td>
                    <td style="width: 160px;">小计(元)</td>
                    <td style="width: 160px;">操作</td>
                </tr>
            </thead>
            <tbody>
                <!-- <tr>
                    <td>
                        <input type="checkbox" class="checkOne">
                    </td>
                    <td>商品</td>
                    <td>单价</td>
                    <td class="conter">
                        <span class="reduce">-</span>
                        <input class="count-input" type="text" value="1" />
                        <span class="add">+</span></td>
                    </td>
                    <td>小计</td>
                    <td>操作</td>
                </tr> -->
            </tbody>

        </table>
        <div class="foot content flexB">
            <label>
                <input type="checkbox" class="checkAll">
                &nbsp;全选
            </label>
            <div>
                已选商品&nbsp;&nbsp;<span class="num price-color">0</span>件;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                合计:￥&nbsp;&nbsp;<span class="price price-color">0.00</span>
                <input type="button" class="getMoney" value="结算">
            </div>
        </div>
    </div>

    <!-- 页脚 -->
    <div id="footer">
        <div class="content">
            <img src="http://img1.lukou.com/static/img/activity/icon.png" class="yx-icon">
            <div class="text">
                <h1 class="title">熊猫优选</h1>
                <p class="slogan">年轻人网购首选<br>购物领券更省钱</p>
            </div>
            <div class="about-us">
                <p class="items"><span class="line">|</span> <a href="#/downLoad" target="_blank" class="item">下载APP</a>
                </p>
            </div>
            <div class="footer">
                <p class="msg">
                    <span>浙公安网备案 33010602009949号 | </span>
                    ICP备案号: <a href="https://beian.miit.gov.cn" style="color: rgb(255, 255, 255);">浙ICP备17012864号-1</a>
                </p>
            </div>
        </div>
    </div>

</body>

<script>
    let priceNum = document.querySelector(".price");
    document.querySelector(".getMoney").onclick = function () {
        if((priceNum.innerHTML-0) != 0){
            layer.open({
            type: 1,
            skin: 'layui-layer-rim', //加上边框
            area: ['260px', '350px'], //宽高
            content: '<h3>请扫描二维码付款</h3><br><img src="./images/个人博客.png" alt="">'
        });
        }
        
    }

    function addCart(id, name, src, price, num) {
        //1 获取购物车数据
        let cartGoods = localStorage.getItem('cart')
        //判断是否为空
        if (cartGoods) {
            cartGoods = JSON.parse(cartGoods);
            // console.log(cartGoods);
            let exists = false;
            //遍历判断多次点击时的情况，数量的变化规律
            cartGoods.forEach(v => {
                // console.log(v);
                if (v.id == id) {
                    // 存在则增加数量
                    // num += v.num;
                    v.num = v.num - 0 + (num - 0)
                    exists = true;
                }
            })
            // console.log(cartGoods);
            // 4-1不存在则添加商品数据
            if (!exists) {
                cartGoods.push({
                    id,
                    name,
                    src,
                    price,
                    num
                })
            }

            // 5 存入local
            localStorage.setItem('cart', JSON.stringify(cartGoods))

        } else { // 4 为空
            // 4-1 以数组的形式保存         {id:1,name:''}  [id,name,src]

            let tmpGoods = {
                id,
                name,
                src,
                price,
                num
            };
            let goodsArr = [tmpGoods];

            // console.log(JSON.stringify(goodsArr));
            // localStorage.setItem('cart', JSON.stringify(tmpGoods))
            localStorage.setItem('cart', JSON.stringify(goodsArr))
        }
    }
</script>
<script src="./js/jquery-2.2.4.js"></script>
<script src="./js/shop.js"></script>
<script src="./js/layer/layer.js"></script>

</html>